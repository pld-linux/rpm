--- rpm-4.4.2/build/rpmfc.c	2007-04-10 23:47:48.198925787 +0300
+++ rpm-4.4.2/build/rpmfc.c	2007-04-10 23:51:46.054233914 +0300
@@ -534,6 +534,8 @@
   /* XXX "python 2.3 byte-compiled" */
   { "python ",			RPMFC_PYTHON|RPMFC_INCLUDE },
 
+  { "Java ",			RPMFC_JAVA|RPMFC_INCLUDE },
+
   /* .NET executables and libraries. file(1) cannot differ it from native win32 executables unfortunatelly */
   { "PE executable",		RPMFC_MONO|RPMFC_INCLUDE },
   { "executable PE",		RPMFC_MONO|RPMFC_INCLUDE },
--- rpm-4.4.2.2/build/rpmfc.c~	2007-12-20 01:36:05.506558726 +0200
+++ rpm-4.4.2.2/build/rpmfc.c	2007-12-20 01:38:13.090998865 +0200
@@ -842,6 +842,12 @@
 	if (findreq)
 	    xx = rpmfcHelper(fc, 'R', "php", noautoreq, noautoreq_c);
     }
+    if (fc->fcolor->vals[fc->ix] & RPMFC_JAVA) {
+	if (findprov)
+	    xx = rpmfcHelper(fc, 'P', "java", noautoprov, noautoprov_c);
+	if (findreq)
+	    xx = rpmfcHelper(fc, 'R', "java", noautoreq, noautoreq_c);
+    }
 
     return 0;
 }
@@ -1255,6 +1261,7 @@
     { rpmfcSCRIPT,	(RPMFC_SCRIPT|RPMFC_PERL) },
     { rpmfcSCRIPT,	(RPMFC_SCRIPT|RPMFC_PYTHON) },
     { rpmfcSCRIPT,	(RPMFC_SCRIPT|RPMFC_PHP) },
+    { rpmfcSCRIPT,	(RPMFC_SCRIPT|RPMFC_JAVA) },
     { rpmfcSCRIPT,      RPMFC_MONO },
     { NULL, 0 }
 };
@@ -1552,6 +1561,15 @@
 	    /* XXX all files with extension ".php" are PHP modules for now. */
 	    else if (slen >= sizeof(".php") && !strcmp(s+slen-(sizeof(".php")-1), ".php"))
 		ftype = "PHP script text";
+
+	    /* XXX all files with extension ".jar" are java archives for now. */
+	    else if (slen >= sizeof(".jar") && !strcmp(s+slen-(sizeof(".jar")-1), ".jar"))
+		ftype = "Java archive file";
+
+	    /* XXX all files with extension ".class" are java class files for now. */
+	    else if (slen >= sizeof(".class") && !strcmp(s+slen-(sizeof(".class")-1), ".class"))
+		ftype = "Java class file";
+
 	    /* XXX skip all files in /dev/ which are (or should be) %dev dummies. */
 	    else if (slen >= fc->brlen+sizeof("/dev/") && !strncmp(s+fc->brlen, "/dev/", sizeof("/dev/")-1))
 		ftype = "";
--- rpm-4.4.2/macros.in~	2007-04-10 23:56:47.370958264 +0300
+++ rpm-4.4.2/macros.in	2007-04-11 01:07:01.215359339 +0300
@@ -446,6 +446,9 @@
 %__mono_provides	@RPMCONFIGDIR@/monodeps.sh --provides
 %__mono_requires	@RPMCONFIGDIR@/monodeps.sh --requires
 
+%__java_provides	%{nil}
+%__java_requires	%{nil}
+
 #
 # fixowner, fixgroup, and fixperms are run at the end of hardcoded setup
 # These macros are necessary only for legacy compatibility, and have moved

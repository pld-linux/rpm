--- rpm-4.4.9/lib/rpmfc.c.orig	2007-05-22 20:19:05.990914000 +0200
+++ rpm-4.4.9/lib/rpmfc.c	2007-05-22 22:12:38.775152636 +0200
@@ -866,6 +866,12 @@
 	/* not only executable, files run by httpd usually are not */
 	if (fc->findreq)
 	    xx = rpmfcHelper(fc, 'R', "php", fc->noautoreq, fc->noautoreq_c);
+    } else
+    if (fc->fcolor->vals[fc->ix] & RPMFC_JAVA) {
+	if (fc->findprov)
+	    xx = rpmfcHelper(fc, 'P', "java", fc->noautoprov, fc->noautoprov_c);
+	if (fc->findreq)
+	    xx = rpmfcHelper(fc, 'R', "java", fc->noautoreq, fc->noautoreq_c);
     }
 
     return 0;
--- rpm-4.4.9/macros.in.orig	2007-05-22 20:22:01.924940000 +0200
+++ rpm-4.4.9/macros.in	2007-05-22 22:13:06.612739010 +0200
@@ -444,6 +444,9 @@
 %__mono_provides	@RPMCONFIGDIR@/monodeps.sh --provides
 %__mono_requires	@RPMCONFIGDIR@/monodeps.sh --requires
 
+%__java_provides	%{nil}
+%__java_requires	%{nil}
+
 #
 # Path to selinux file context patterns used to verify
 # file contexts on file system.
